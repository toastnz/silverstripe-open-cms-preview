(()=>{var o=document.createElement("div"),i=null,n=null,e=null,c=!1,t=[],r=null,a="",d=document.createElement("iframe"),s=".cms-container",u='[name="OpenCMSPreview"]';function l(){document.body.contains(o)||n.appendChild(o),c||(clearTimeout(e),c=!0,e=setTimeout(function(){clearTimeout(e),e=setTimeout(function(){if(!i)return c=!1;var n=document.createElement("iframe"),t=function(){var e=d.contentWindow.scrollY;n.contentWindow.scrollTo(0,e),d.remove(),c=!1,(d=n).removeEventListener("load",t)};n.className=d.className,o.appendChild(n),n.addEventListener("load",t),n.src=i.value},500)},500))}d.src="about:blank",d.className="open-cms-preview__iframe",o.classList.add("open-cms-preview"),o.appendChild(d);var m,v,w=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&t.push(e),w.unobserve(e.target)})});new MutationObserver(function(e){clearTimeout(r),r=setTimeout(function(){t.length=0},50),i=document.querySelector(u),n=document.querySelector(s),e.forEach(function(e){e.addedNodes.forEach(function(e){1!==e.nodeType||o.contains(e)||w.observe(e)})}),(3<=t.length||window.location.href!==a)&&(a=window.location.href,t.length=0,console.log("updating preview"),i&&n?l():(a="",document.body.contains(o)&&o.remove()))}).observe(document.body,{childList:!0,subtree:!0}),m=!1,(v=document.createElement("button")).classList.add("open-cms-preview__thumb"),o.appendChild(v),v.addEventListener("mousedown",function(){m=!0,o.classList.add("dragging")}),window.addEventListener("mouseup",function(){m=!1,o.classList.remove("dragging")}),window.addEventListener("mousemove",function(n){window.requestAnimationFrame(function(){var e;m&&(e=n.clientX-10,e=window.innerWidth-e,document.body.style.setProperty("--preview-width","".concat(e,"px")))})})})();
//# sourceMappingURL=index.js.map