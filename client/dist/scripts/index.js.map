{"version":3,"file":"index.js","mappings":"MAAA,IAAIA,EAAE,CAACC,EAAE,CAACC,EAAEC,KAAK,IAAI,IAAIC,KAAKD,EAAEH,EAAEK,EAAEF,EAAEC,CAAC,GAAG,CAACJ,EAAEK,EAAEH,EAAEE,CAAC,GAAGE,OAAOC,eAAeL,EAAEE,EAAE,CAACI,WAAW,GAAGC,IAAIN,EAAEC,EAAE,CAAC,CAAC,EAAEC,EAAE,CAACL,EAAEE,IAAII,OAAOI,UAAUC,eAAeC,KAAKZ,EAAEE,CAAC,CAAC,EAAEA,EAAE,GAAGF,EAAEC,EAAEC,EAAE,CAACW,EAAE,IAAIR,CAAC,CAAC,EAAE,IAAMF,EAAE,CAACW,UAAU,GAAGC,QAAQ,EAAE,EAAEX,EAAEJ,GAAGgB,QAAQC,IAAI,eAAejB,CAAC,QAAQK,EAAEa,cAAcC,KAAKC,OAAO,GAAGD,KAAKE,UAAU,IAAIC,GAAG,CAACC,qBAAqBvB,GAAGwB,IAAItB,EAAEiB,KAAKE,UAAUZ,IAAIT,CAAC,EAAE,OAAOE,KAAIA,EAAE,IAAIuB,iBAAiB,KAAMN,KAAKC,OAAOM,OAAQxB,GAAGA,EAAEyB,WAAW3B,CAAE,EAAE4B,QAAS5B,GAAGA,EAAE6B,OAAO,CAAE,CAAE,CAAC,GAAIC,QAAQC,SAASC,KAAKhC,CAAC,EAAEmB,KAAKE,UAAUY,IAAIjC,EAAEE,CAAC,EAAEA,EAAE,CAAC4B,UAAUN,IAAIxB,EAAmB,EAAjBkC,UAAUC,QAAU,SAASD,UAAU,GAAGA,UAAU,GAAG,GAAGhC,EAAmB,EAAjBgC,UAAUC,QAAU,SAASD,UAAU,GAAGA,UAAU,GAAG9B,EAAEC,EAAmB,EAAjB6B,UAAUC,QAAU,SAASD,UAAU,GAAGA,UAAU,GAAG/B,EAAE,GAAG,CAACH,EAAE,OAAOgB,QAAQoB,MAAMpC,EAAE,gDAAgD,EAAE,GAAG,CAACE,GAAG,YAAY,OAAOA,EAAE,OAAOc,QAAQoB,MAAMpC,EAAE,gDAAgD,EAAEK,EAAEC,OAAO+B,OAAOhC,EAAEF,CAAC,EAAEgB,KAAKI,qBAAqBlB,CAAC,EAAQiC,EAAE,IAAIC,EAAEvC,EAAEE,EAAEG,CAAC,EAAEc,KAAKC,OAAOoB,KAAKF,CAAC,CAAC,CAAC,OAAOC,EAAErB,YAAYlB,EAAEE,EAAEC,GAAGgB,KAAKsB,MAAM,IAAIC,IAAIvB,KAAKwB,SAAS,GAAGxB,KAAKyB,SAAS5C,EAAEmB,KAAK0B,SAAS3C,EAAEiB,KAAKQ,SAASxB,EAAEgB,KAAKU,OAAO,CAAC,CAACA,SAASiB,aAAa3B,KAAKwB,SAASd,MAAM,EAAEV,KAAKwB,SAASd,OAAOkB,WAAW,KAAM,IAAM/C,EAAE,CAAC,GAAG+B,SAASiB,iBAAiB7B,KAAKyB,QAAQ,GAAGlB,OAAQ1B,GAAG,CAACmB,KAAKsB,MAAMQ,IAAIjD,CAAC,CAAE,EAAEA,EAAEmC,SAASnC,EAAE4B,QAAS5B,GAAGmB,KAAKsB,MAAMS,IAAIlD,CAAC,CAAE,EAAEmB,KAAK0B,SAAS7C,CAAC,EAAG,EAAE,GAAG,CAAC,CAAC,CAAC,ICIn0CmD,EAAW,IDJ8zCjD,EAAEW,ECK30CuC,EAAQ,KACRC,EAAe,KACfC,EAAS,KAGTC,EACK,0BADLA,EAEY,eAFZA,EAGM,sBAENC,EAAoB,IAAI/B,iBAAiB,WACtC6B,GAAWF,GAChBK,EAAc,CAChB,CAAC,EAGD,SAASA,IACHH,EAAOI,MAAQN,EAAMO,OAA2C,CAAC,EAAnCL,EAAOI,IAAIE,QAAQR,EAAMO,KAAK,IAGhEL,EAAOI,IAAMN,EAAMO,MACrB,CAoCA,SAASE,IAEP,IAnCIC,EAGAC,EAgCCX,GAAUrB,SAASC,KAAKgC,SAASZ,CAAK,GACtCE,GAAWvB,SAASC,KAAKgC,SAASV,CAAM,GACxCD,GAAiBtB,SAASC,KAAKgC,SAASX,CAAY,IArCrDS,EAAa,IAGbC,EAAQhC,SAASkC,cAAc,QAAQ,GAGrCC,UAAUhB,IAAI,oBAAoB,EAGxCG,EAAac,YAAYJ,CAAK,EAG9BA,EAAMK,iBAAiB,YAAa,WAElCN,EAAa,GACbT,EAAaa,UAAUhB,IAAI,UAAU,CACvC,CAAC,EACDmB,OAAOD,iBAAiB,UAAW,WAEjCN,EAAa,GACbT,EAAaa,UAAUI,OAAO,UAAU,CAC1C,CAAC,EACDD,OAAOD,iBAAiB,YAAa,SAAUpE,GAE7CqE,OAAOE,sBAAsB,WAE3B,IAEIC,EAFCV,IACDW,EAASzE,EAAE0E,QAAU,GACrBF,EAAQH,OAAOM,WAAaF,EAChC1C,SAASC,KAAK4C,MAAMC,YAAY,kBAAmB,GAAGC,OAAON,EAAO,IAAI,CAAC,EAC3E,CAAC,CACH,CAAC,EAUDf,EAAc,EAChB,CAGAN,EAASrB,QAAQyB,EAAiB,SAAUwB,GAE1C3B,EAAQ2B,EAAO,GAGflB,EAAK,CACP,CAAC,EAGDV,EAASrB,QAAQyB,EAAwB,SAAUyB,GAEjD,GAAI1B,EAAQ,IACVE,EAAkByB,UAAU3B,CAAM,CACvB,CAAX,MAAOtD,IAGTqD,EAAe2B,EAAO,GACtB1B,EAASvB,SAASmD,cAAc3B,CAAgB,EAGhDM,EAAK,EAGLL,EAAkB1B,QAAQwB,EAAQ,CAChC6B,WAAY,GACZC,gBAAiB,CAAC,MACpB,CAAC,CACH,CAAC,C","sources":["webpack://theme-colours/./node_modules/domobserverjs/dist/index.js","webpack://theme-colours/./client/source/scripts/index.js"],"sourcesContent":["var e={d:(t,s)=>{for(var r in s)e.o(s,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{A:()=>o});const s={childList:!0,subtree:!0},r=e=>console.log(\"DomObserver:\",e);class o{constructor(){this.agents=[],this.observers=new Map}findOrCreateObserver(e){let t=this.observers.get(e);return t||(t=new MutationObserver((()=>{this.agents.filter((t=>t.settings===e)).forEach((e=>e.update()))})),t.observe(document.body,e),this.observers.set(e,t),t)}observe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;if(!e)return console.error(e+\" DomObserver not created: No selector provided\");if(!t||\"function\"!=typeof t)return console.error(e+\" DomObserver not created: No callback provided\");o=Object.assign(o,s),this.findOrCreateObserver(o);const c=new i(e,t,o);this.agents.push(c)}}class i{constructor(e,t,s){this.cache=new Set,this.timeouts={},this.selector=e,this.callback=t,this.settings=s,this.update()}update(){clearTimeout(this.timeouts.update),this.timeouts.update=setTimeout((()=>{const e=[...document.querySelectorAll(this.selector)].filter((e=>!this.cache.has(e)));e.length&&(e.forEach((e=>this.cache.add(e))),this.callback(e))}),100)}}var c=t.A;export{c as default};","import DomObserverController from 'domobserverjs';\nimport '../styles/index.scss';\n\n// Create a new observer\nvar Observer = new DomObserverController();\nvar input = null;\nvar previewPanel = null;\nvar iframe = null;\n\n// Selectors for the input and preview panel elements\nvar selectors = {\n  input: '[name=\"OpenCMSPreview\"]',\n  previewPanel: '.cms-preview',\n  iframe: '.cms-preview iframe'\n};\nvar iframeSrcObserver = new MutationObserver(function () {\n  if (!iframe || !input) return;\n  updatePreview();\n});\n\n// Function to update the preview src\nfunction updatePreview() {\n  if (iframe.src === input.value || iframe.src.indexOf(input.value) > -1) return;\n\n  // Set the iframe src to the input value\n  iframe.src = input.value;\n}\nfunction makePreviewResizeable() {\n  // We will toggle this to toggle the dragging state\n  var isDragging = false;\n\n  // Create a new button element to drag the preview width\n  var thumb = document.createElement('button');\n\n  // Add a class\n  thumb.classList.add('cms-preview__thumb');\n\n  // Add the thumb to the preview\n  previewPanel.appendChild(thumb);\n\n  // Add a mouse down event listener\n  thumb.addEventListener('mousedown', function () {\n    // Set dragging to true\n    isDragging = true;\n    previewPanel.classList.add('dragging');\n  });\n  window.addEventListener('mouseup', function () {\n    // Set dragging to false\n    isDragging = false;\n    previewPanel.classList.remove('dragging');\n  });\n  window.addEventListener('mousemove', function (e) {\n    // Set the width of the preview\n    window.requestAnimationFrame(function () {\n      // If we are not dragging, return\n      if (!isDragging) return;\n      var mouseX = e.clientX - 10;\n      var width = window.innerWidth - mouseX;\n      document.body.style.setProperty('--preview-width', \"\".concat(width, \"px\"));\n    });\n  });\n}\nfunction init() {\n  // If we dont have an input or iframe, we cant open the preview\n  if (!input || !document.body.contains(input)) return;\n  if (!iframe || !document.body.contains(iframe)) return;\n  if (!previewPanel || !document.body.contains(previewPanel)) return;\n\n  // Update the preview\n  makePreviewResizeable();\n  updatePreview();\n}\n\n// Watch for our input being added to the DOM\nObserver.observe(selectors.input, function (inputs) {\n  // Update the input var\n  input = inputs[0];\n\n  // Initialize the preview\n  init();\n});\n\n// Watch for the preview panel being added to the DOM\nObserver.observe(selectors.previewPanel, function (panels) {\n  // If we have an iframe, unoobserve it to start with\n  if (iframe) try {\n    iframeSrcObserver.unobserve(iframe);\n  } catch (e) {}\n\n  // Update the preview panel and iframe vars\n  previewPanel = panels[0];\n  iframe = document.querySelector(selectors.iframe);\n\n  // Initialize the preview\n  init();\n\n  // Observe the iframe src\n  iframeSrcObserver.observe(iframe, {\n    attributes: true,\n    attributeFilter: ['src']\n  });\n});"],"names":["e","d","t","s","r","o","Object","defineProperty","enumerable","get","prototype","hasOwnProperty","call","A","childList","subtree","console","log","constructor","this","agents","observers","Map","findOrCreateObserver","let","MutationObserver","filter","settings","forEach","update","observe","document","body","set","arguments","length","error","assign","c","i","push","cache","Set","timeouts","selector","callback","clearTimeout","setTimeout","querySelectorAll","has","add","Observer","input","previewPanel","iframe","selectors","iframeSrcObserver","updatePreview","src","value","indexOf","init","isDragging","thumb","contains","createElement","classList","appendChild","addEventListener","window","remove","requestAnimationFrame","width","mouseX","clientX","innerWidth","style","setProperty","concat","inputs","panels","unobserve","querySelector","attributes","attributeFilter"],"sourceRoot":""}