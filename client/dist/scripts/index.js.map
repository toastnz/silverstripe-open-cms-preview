{"version":3,"file":"index.js","mappings":"MACA,IAmCMA,EAGAC,EAtCFC,EAAeC,SAASC,cAAc,KAAK,EAC3CC,EAASF,SAASC,cAAc,QAAQ,EACxCE,EAAQ,KACRC,EAAY,KACZC,EAAiB,KACjBC,EAAe,GAGfC,EACS,iBADTA,EAEK,0BA0DT,SAASC,IACFR,SAASS,KAAKC,SAASX,CAAY,GACtCK,EAAUO,YAAYZ,CAAY,EAjDhCO,IACJM,aAAaP,CAAc,EAC3BC,EAAe,GACfD,EAAiBQ,WAAW,WAC1BX,EAAOY,IAAM,cACbF,aAAaP,CAAc,EAC3BA,EAAiBQ,WAAW,WAC1BX,EAAOY,IAAMX,EAAMY,MACnBT,EAAe,EACjB,EAAG,GAAG,CACR,EAAG,GAAG,EA4CR,CA7DAJ,EAAOY,IAAM,cACbZ,EAAOc,UAAY,2BACnBjB,EAAakB,UAAUC,IAAI,kBAAkB,EAC7CnB,EAAaY,YAAYT,CAAM,EAgEhB,IAAIiB,iBAAiB,SAAUC,GAE5CjB,EAAQH,SAASqB,cAAcd,CAAe,EAE9CH,EAAYJ,SAASqB,cAAcd,CAAmB,EAGlDa,EAAUE,KAAK,SAAUC,GAC3B,OAAOC,MAAMC,KAAKF,EAASG,UAAU,EAAEJ,KAAK,SAAUK,GACpD,OAAyB,IAAlBA,EAAKC,QACd,CAAC,GAAKJ,MAAMC,KAAKF,EAASM,YAAY,EAAEP,KAAK,SAAUK,GACrD,OAAyB,IAAlBA,EAAKC,QACd,CAAC,CACH,CAAC,IAECzB,GAASC,EAAYI,EAAW,EAnB9BR,SAASS,KAAKC,SAASX,CAAY,GACrCA,EAAa+B,OAAO,EAoBxB,CAAC,EAGQC,QAAQ/B,SAASS,KAAM,CAC9BuB,UAAW,GACXC,QAAS,EACX,CAAC,EArEKpC,EAAa,IAGbC,EAAQE,SAASC,cAAc,QAAQ,GAGrCgB,UAAUC,IAAI,yBAAyB,EAG7CnB,EAAaY,YAAYb,CAAK,EAG9BA,EAAMoC,iBAAiB,YAAa,WAElCrC,EAAa,GACbE,EAAakB,UAAUC,IAAI,UAAU,CACvC,CAAC,EACDiB,OAAOD,iBAAiB,UAAW,WAEjCrC,EAAa,GACbE,EAAakB,UAAUa,OAAO,UAAU,CAC1C,CAAC,EACDK,OAAOD,iBAAiB,YAAa,SAAUE,GAE7CD,OAAOE,sBAAsB,WAE3B,IAEIC,EAFCzC,IACD0C,EAASH,EAAEI,QAAU,GACrBF,EAAQH,OAAOM,WAAaF,EAChCvC,SAASS,KAAKiC,MAAMC,YAAY,kBAAmB,GAAGC,OAAON,EAAO,IAAI,CAAC,EAC3E,CAAC,CACH,CAAC,C","sources":["webpack://theme-colours/./client/source/scripts/index.js"],"sourcesContent":["import '../styles/index.scss';\nvar previewPanel = document.createElement('div');\nvar iframe = document.createElement('iframe');\nvar input = null;\nvar container = null;\nvar refreshTimeout = null;\nvar isRefreshing = false;\n\n// Selectors for the input and preview panel elements\nvar selectors = {\n  container: '.cms-container',\n  input: '[name=\"OpenCMSPreview\"]'\n};\n\n// Set up some classes and put the iframe into the preview panel\niframe.src = 'about:blank';\niframe.className = 'open-cms-preview__iframe';\npreviewPanel.classList.add('open-cms-preview');\npreviewPanel.appendChild(iframe);\n\n// Function to update the preview src\nfunction updatePreview() {\n  if (isRefreshing) return;\n  clearTimeout(refreshTimeout);\n  isRefreshing = true;\n  refreshTimeout = setTimeout(function () {\n    iframe.src = 'about:blank';\n    clearTimeout(refreshTimeout);\n    refreshTimeout = setTimeout(function () {\n      iframe.src = input.value;\n      isRefreshing = false;\n    }, 500);\n  }, 500);\n}\nfunction makePreviewResizeable() {\n  // We will toggle this to toggle the dragging state\n  var isDragging = false;\n\n  // Create a new button element to drag the preview width\n  var thumb = document.createElement('button');\n\n  // Add a class\n  thumb.classList.add('open-cms-preview__thumb');\n\n  // Add the thumb to the preview\n  previewPanel.appendChild(thumb);\n\n  // Add a mouse down event listener\n  thumb.addEventListener('mousedown', function () {\n    // Set dragging to true\n    isDragging = true;\n    previewPanel.classList.add('dragging');\n  });\n  window.addEventListener('mouseup', function () {\n    // Set dragging to false\n    isDragging = false;\n    previewPanel.classList.remove('dragging');\n  });\n  window.addEventListener('mousemove', function (e) {\n    // Set the width of the preview\n    window.requestAnimationFrame(function () {\n      // If we are not dragging, return\n      if (!isDragging) return;\n      var mouseX = e.clientX - 10;\n      var width = window.innerWidth - mouseX;\n      document.body.style.setProperty('--preview-width', \"\".concat(width, \"px\"));\n    });\n  });\n}\nfunction addPreview() {\n  if (!document.body.contains(previewPanel)) {\n    container.appendChild(previewPanel);\n  }\n\n  // Update the preview\n  updatePreview();\n}\nfunction removePreview() {\n  if (document.body.contains(previewPanel)) {\n    previewPanel.remove();\n  }\n}\nvar Observer = new MutationObserver(function (mutations) {\n  // Check if the input exists\n  input = document.querySelector(selectors.input);\n  // Check if the container exists\n  container = document.querySelector(selectors.container);\n\n  // If any of the mutations involve added or removed element nodes\n  if (mutations.some(function (mutation) {\n    return Array.from(mutation.addedNodes).some(function (node) {\n      return node.nodeType === 1;\n    }) || Array.from(mutation.removedNodes).some(function (node) {\n      return node.nodeType === 1;\n    });\n  })) {\n    // Show or hide the preview based on the presence of the input\n    input && container ? addPreview() : removePreview();\n  }\n});\n\n// Watch the body for changes\nObserver.observe(document.body, {\n  childList: true,\n  subtree: true\n});\nmakePreviewResizeable();"],"names":["isDragging","thumb","previewPanel","document","createElement","iframe","input","container","refreshTimeout","isRefreshing","selectors","addPreview","body","contains","appendChild","clearTimeout","setTimeout","src","value","className","classList","add","MutationObserver","mutations","querySelector","some","mutation","Array","from","addedNodes","node","nodeType","removedNodes","remove","observe","childList","subtree","addEventListener","window","e","requestAnimationFrame","width","mouseX","clientX","innerWidth","style","setProperty","concat"],"sourceRoot":""}